<?xml version="1.0" encoding="UTF-8"?>
<project
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
        xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <modelVersion>4.0.0</modelVersion>

    <groupId>com.optum.fads</groupId>
    <artifactId>fads-pgp-behavior-api</artifactId>
    <version>1.0.0</version>
    <packaging>jar</packaging>

    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.5.7</version>
        <relativePath/>
    </parent>

    <repositories>
        <repository>
            <id>artifactory</id>
            <name>Artifactory</name>
            <url>https://repo1.uhc.com/artifactory/repo</url>
        </repository>
    </repositories>

    <properties>
        <maven.test.skip>false</maven.test.skip>
        <skipTests>${maven.test.skip}</skipTests>
        <!-- >surefire.skip>${skipTests}</surefire.skip -->
        <failsafe.skip>${skipTests}</failsafe.skip>

        <java.version>17</java.version>
        <spring.boot.version>3.5.7</spring.boot.version>
        <spring.cloud.version>2023.0.2</spring.cloud.version>
        <jasypt.version>2.1.0</jasypt.version>
        <jwt.version>3.8.3</jwt.version>
        <modelmapper.version>3.2.2</modelmapper.version>
        <jacoco.version>0.8.10</jacoco.version>
        <springrunner.version>0.1.0</springrunner.version>
        <guava.version>32.1.2-jre</guava.version>
        <logback.encoder.version>7.4</logback.encoder.version>
        <lombok.version>1.18.28</lombok.version>
        <restassured.version>3.3.0</restassured.version>
        <mockito.version>5.3.1</mockito.version>
        <sonar.exclusions>**/constants/**,**/domain/**</sonar.exclusions>
        <org.mapstruct.version>1.5.5.Final</org.mapstruct.version>
        <log4j.version>2.24.3</log4j.version>
        <snakeyaml.version>2.2</snakeyaml.version>
        <jaxb.version>2.3.1</jaxb.version>
        <sonar.version>3.9.1.2184</sonar.version>

    </properties>

    <dependencyManagement>
        <dependencies>

            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring.boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>

            <dependency>
                <groupId>org.springframework.cloud</groupId>
                <artifactId>spring-cloud-dependencies</artifactId>
                <version>${spring.cloud.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-bom</artifactId>
                <version>${log4j.version}</version>
                <scope>import</scope>
                <type>pom</type>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <dependencies>
        <!-- Spring Boot Dependencies -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-validation</artifactId>
        </dependency>

        <dependency>
            <groupId>org.apache.tomcat.embed</groupId>
            <artifactId>tomcat-embed-core</artifactId>
            <version>10.1.47</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-webflux</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-oauth2-resource-server</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-oauth2-jose</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
        </dependency>

        <!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 -->
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
        </dependency>

        <!-- Model Mapper -->
        <dependency>
            <groupId>org.modelmapper</groupId>
            <artifactId>modelmapper</artifactId>
            <version>${modelmapper.version}</version>
        </dependency>

        <!-- Jackson -->


        <!-- Lombok -->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <scope>provided</scope>
        </dependency>

        <!-- JSON logging -->
        <dependency>
            <groupId>net.logstash.logback</groupId>
            <artifactId>logstash-logback-encoder</artifactId>
            <version>${logback.encoder.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
        </dependency>

        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-core</artifactId>
        </dependency>

        <dependency>
            <groupId>org.codehaus.janino</groupId>
            <artifactId>janino</artifactId>
            <scope>runtime</scope>
        </dependency>

        <!-- Testing -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-core</artifactId>
            <scope>test</scope>
        </dependency>

        <!-- Before After Spring Test Runner -->
        <dependency>
            <groupId>org.bitbucket.radistao.test</groupId>
            <artifactId>before-after-spring-test-runner</artifactId>
            <version>${springrunner.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>io.rest-assured</groupId>
            <artifactId>rest-assured</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.mapstruct</groupId>
            <artifactId>mapstruct</artifactId>
            <version>${org.mapstruct.version}</version>
        </dependency>
        <dependency>
            <groupId>org.mapstruct</groupId>
            <artifactId>mapstruct-jdk8</artifactId>
            <version>${org.mapstruct.version}</version>
        </dependency>
        <dependency>
            <groupId>org.mapstruct</groupId>
            <artifactId>mapstruct-processor</artifactId>
            <version>${org.mapstruct.version}</version>
        </dependency>
        <dependency>
            <groupId>com.microsoft.sqlserver</groupId>
            <artifactId>mssql-jdbc</artifactId>
        </dependency>
      
        <dependency>
            <groupId>org.yaml</groupId>
            <artifactId>snakeyaml</artifactId>
            <version>${snakeyaml.version}</version>
        </dependency>
  
    </dependencies>

    <build>
<!--        <finalName>${project.artifactId}</finalName>-->
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.projectlombok</groupId>
                    <artifactId>lombok-maven-plugin</artifactId>
                    <version>${lombok.version}</version>
                    <dependencies>
                        <dependency>
                            <groupId>org.projectlombok</groupId>
                            <artifactId>lombok</artifactId>
                            <version>${lombok.version}</version>
                        </dependency>
                    </dependencies>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>install</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.directory}/lib</outputDirectory>
                            <excludeScope>provided</excludeScope>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-enforcer-plugin</artifactId>
                <executions>
                    <execution>
                        <id>enforce-maven</id>
                        <goals>
                            <goal>enforce</goal>
                        </goals>
                        <configuration>
                            <rules>
                                <requireMavenVersion>
                                    <version>3.3.9</version>
                                </requireMavenVersion>
                            </rules>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>repackage</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>io.github.git-commit-id</groupId>
                <artifactId>git-commit-id-maven-plugin</artifactId>
                <version>9.0.1</version>
                <executions>
                    <execution>
                        <id>get-the-git-infos</id>
                        <goals>
                            <goal>revision</goal>
                        </goals>
                        <phase>initialize</phase>
                    </execution>
                </executions>
                <configuration>
                    <dotGitDirectory>${project.basedir}/.git</dotGitDirectory>
                    <generateGitPropertiesFile>true</generateGitPropertiesFile>
                </configuration>
            </plugin>
            <!-- Below plugin ensures the execution of test cases during maven build-->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <executions>
                    <execution>
                        <id>integration-test</id>
                        <goals>
                            <goal>integration-test</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>verify</id>
                        <goals>
                            <goal>verify</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <skip>${failsafe.skip}</skip>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.jacoco</groupId>
                <artifactId>jacoco-maven-plugin</artifactId>
                <version>${jacoco.version}</version>
                <configuration>
                    <destFile>target/jacoco.exec</destFile>
                </configuration>
                <executions>
                    <execution>
                        <id>jacoco-initialize</id>
                        <goals>
                            <goal>prepare-agent</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>jacoco-site</id>
                        <phase>package</phase>
                        <goals>
                            <goal>report</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project>



above is my current pom based on this provide the junit for below controller 
/*
//***********************************************
// Copyright UNITEDHEALTH GROUP CORPORATION 2018.
// This software and documentation contain confidential and
// proprietary information owned by UnitedHealth Group Corporation.
// Unauthorized use and distribution are prohibited.
//***********************************************
*/

package com.optum.fads.pgp.behavior.api.controller;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.stereotype.Component;
import org.springframework.web.bind.WebDataBinder;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.InitBinder;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import com.optum.fads.pgp.behavior.api.common.ListTableParams;
import com.optum.fads.pgp.behavior.api.common.ListTableParamsReq;
import com.optum.fads.pgp.behavior.api.common.constants.BehaviorPatternConstants;
import com.optum.fads.pgp.behavior.api.dto.AppUser;
import com.optum.fads.pgp.behavior.api.dto.BehaviorPatternDTO;
import com.optum.fads.pgp.behavior.api.dto.DataRuleDTO;
import com.optum.fads.pgp.behavior.api.dto.PaginationResult;
import com.optum.fads.pgp.behavior.api.exception.BehaviorPatternApiException;
import com.optum.fads.pgp.behavior.api.service.IBehaviorPatternDataService;
import com.optum.fads.pgp.behavior.api.dto.AccessLevel;

/**
 * Use this class to add the methods so that a single web service can be used to
 * get and update the FADS Behavior Pattern data
 *
 ** @author Anil Wagh
 */
@Component
@RestController
//@RequestMapping("/behavior")
@CrossOrigin
public class BehaviorPatternController {

	private static final Logger logit = LoggerFactory.getLogger(BehaviorPatternController.class);

	@Autowired
	private IBehaviorPatternDataService iBehaviorPatternDataService;

	final String[] DISALLOWED_FIELDS = new String[]{"listTableParams.selectedItemIds"};
	    
	    @InitBinder(value = "listTableParams")
	    void initListTableParamsValidator(WebDataBinder binder) {
	        binder.setDisallowedFields(DISALLOWED_FIELDS);
	    }
	    
	/**
	 * this method will give all the Behavior Pattern data or records per page
	 * 
	 * @param - ListTableParams (contains sort, filter conditions; page number, page
	 *          size)
	 */
	@GetMapping(value = "/getbehaviorpatterns/**", headers = "Accept=application/json")
	public ResponseEntity getBehaviorPatterns(ListTableParamsReq listTableParamsReq,String searchInput) {
		PaginationResult paginationResult;
		try {
			ListTableParams listTableParams=new ListTableParams();
			listTableParams.setPageNumber(listTableParamsReq.getPageNumber());
			listTableParams.setRecordsPerPage(listTableParamsReq.getRecordsPerPage());
			listTableParams.setSearchBy(listTableParamsReq.getSearchBy());
			listTableParams.setSearchInput(Collections.singletonList(searchInput));
			listTableParams.setSelectedItemIds(listTableParamsReq.getSelectedItemIds());
			listTableParams.setSortBy(listTableParamsReq.getSortBy());
			listTableParams.setSortOrder(listTableParamsReq.getSortOrder());
			paginationResult = iBehaviorPatternDataService.getBehaviorPatternsList(listTableParams); // get behavior
																										// patterns
		} catch (BehaviorPatternApiException ex) {
			logit.error(BehaviorPatternConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(BehaviorPatternConstants.EXCEPTION_MESSAGE);
		}
		return ResponseEntity.status(HttpStatus.OK).body(paginationResult);
	}

	/**
	 * this method will get the behavior pattern record corresponding to input
	 * behavior pattern ID
	 * 
	 * @param - Behavior Pattern ID
	 */
	@GetMapping(value = "/getbehaviorpatterndetails/{behaviorpatternId}")
	public ResponseEntity getBehaviorpatternById(@PathVariable(name = "behaviorpatternId") Integer behaviorPatternId)

	{
		BehaviorPatternDTO behaviorPatternDTO = null;
		try {
			behaviorPatternDTO = iBehaviorPatternDataService.getBehaviorPatternById(behaviorPatternId);
		} catch (BehaviorPatternApiException ex) {
			logit.error(ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body("Behavior Pattern ID not found");
		}
		return ResponseEntity.status(HttpStatus.OK).body(behaviorPatternDTO);
	}

	/**
	 * this method will get the available Data Rule records
	 * 
	 * @param - ER ID (Extact Rule ID)
	 */
	@GetMapping(value = { "/getavailabledatarules/{extractRuleId}" })
	public ResponseEntity getAvailableDatarules(@PathVariable(name = "extractRuleId") Integer extractRuleId) {
		List<DataRuleDTO> availableDatarulesList;
		try {
			availableDatarulesList = iBehaviorPatternDataService.getAvailableDatarules(extractRuleId);
		} catch (BehaviorPatternApiException ex) {
			logit.error(BehaviorPatternConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(BehaviorPatternConstants.EXCEPTION_MESSAGE);
		}
		return ResponseEntity.status(HttpStatus.OK).body(availableDatarulesList);
	}

	/**
	 * this method will get the selected Data Rule records for a behavior pattern
	 * 
	 * @param - ER ID (Extact Rule ID)
	 */
	@GetMapping(value = { "/getselecteddatarules/{extractRuleId}" })
	public ResponseEntity getSelectedDatarules(@PathVariable(name = "extractRuleId") Integer extractRuleId) {
		List<DataRuleDTO> selectedDataRulesList;
		boolean details = false;
		try {
			selectedDataRulesList = iBehaviorPatternDataService.getSelectedDataRules(extractRuleId, details);
		} catch (BehaviorPatternApiException ex) {
			logit.error(BehaviorPatternConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(BehaviorPatternConstants.EXCEPTION_MESSAGE);
		}
		return ResponseEntity.status(HttpStatus.OK).body(selectedDataRulesList);
	}

	/**
	 * this method will delete the behavior pattern records corresponding to input
	 * behavior pattern ID
	 * 
	 * @param - Behavior Pattern ID
	 */
	@DeleteMapping(value = "/deletebehaviorpattern/{behaviorpatternid}")
	public ResponseEntity deleteBehaviorPatternById(
			@PathVariable(name = "behaviorpatternid") Integer behaviorPatternId)

	{
		List<String> deleteBehaviorPatternMessages;
		try {
			deleteBehaviorPatternMessages = iBehaviorPatternDataService.deleteBehaviorPattern(behaviorPatternId);
		} catch (BehaviorPatternApiException ex) {
			logit.error(BehaviorPatternConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(BehaviorPatternConstants.EXCEPTION_MESSAGE);
		}
		return ResponseEntity.status(HttpStatus.OK).body(deleteBehaviorPatternMessages);
	}

	/**
	 * this method will add a behavior pattern
	 * 
	 * @param - behaviorPatternDTO
	 */
	@PostMapping(value = { "/newbehaviorpattern" })
	public ResponseEntity newBehaviorPattern(@RequestBody BehaviorPatternDTO behaviorPatternDTO) {
		BehaviorPatternDTO retBehaviorPatternDTO = null;
		String userAccess = "";
		boolean userHasAccess = false;
		try {
			DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(BehaviorPatternConstants.DATE_FORMAT_MMDDYYYY_HHMMSS_A,
					Locale.ENGLISH);
			AppUser user = (AppUser) SecurityContextHolder.getContext().getAuthentication().getPrincipal();
			behaviorPatternDTO.setCreatedBySystemId(user.getUserSystemId());
			behaviorPatternDTO.setModifiedBySystemId(user.getUserSystemId());
			List<AccessLevel> userAccessLevels = user.getRole().getAllowedAccesses();
			for (AccessLevel userAccessLevel : userAccessLevels) {
				if (userAccessLevel.getModuleCode().equals("STUDY")) {
					userAccess = userAccessLevel.getAccess();
					break;
				}
			}
			if (userAccess.equals("A") || userAccess.equals("B")) {
				userHasAccess = true;
			}
			if (userHasAccess) {
				LocalDateTime currentLocalDate = LocalDateTime.now(iBehaviorPatternDataService.getZoneId());
				// Save the create, update date as per local time zone in the DTO
				behaviorPatternDTO.setCreatedDate(dateTimeFormatter.format(currentLocalDate));
				behaviorPatternDTO.setModifiedDate(dateTimeFormatter.format(currentLocalDate));
				retBehaviorPatternDTO = iBehaviorPatternDataService.addBehaviorPattern(behaviorPatternDTO);
				return ResponseEntity.status(HttpStatus.CREATED).body(retBehaviorPatternDTO);
			} else {
				return new ResponseEntity<String>(BehaviorPatternConstants.NOT_AUTHORIZED, HttpStatus.FORBIDDEN);
			}	
		} catch (BehaviorPatternApiException ex) {
			logit.error(BehaviorPatternConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(BehaviorPatternConstants.EXCEPTION_MESSAGE);
		}
		
	}

	/**
	 * this method will update a behavior pattern
	 * 
	 * @param - behaviorPatternDTO
	 */
	@PutMapping(value = { "/updatebehaviorpattern/{erId}" })
	public ResponseEntity<String> updateBehaviorPattern(@PathVariable(name = "erId") Integer erId,
			@RequestBody BehaviorPatternDTO behaviorPatternDTO) {
		String updBehaviorPatternMessage;
		String userAccess = "";
		boolean userHasAccess = false;
		try {
			DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(BehaviorPatternConstants.DATE_FORMAT_MMDDYYYY_HHMMSS_A,
					Locale.ENGLISH);
			AppUser user = (AppUser) SecurityContextHolder.getContext().getAuthentication().getPrincipal();
			behaviorPatternDTO.setModifiedBySystemId(user.getUserSystemId());
			List<AccessLevel> userAccessLevels = user.getRole().getAllowedAccesses();
			for (AccessLevel userAccessLevel : userAccessLevels) {
				if (userAccessLevel.getModuleCode().equals("STUDY")) {
					userAccess = userAccessLevel.getAccess();
					break;
				}
			}
			if (userAccess.equals("A") || 
					(userAccess.equals("B") && behaviorPatternDTO.getCreatedBySystemId().equals(user.getUserSystemId()))) {
				userHasAccess = true;
			}
			if (userHasAccess) {
				LocalDateTime currentLocalDate = LocalDateTime.now(iBehaviorPatternDataService.getZoneId());
				// Save the update date as per local time zone in the DTO
				behaviorPatternDTO.setModifiedDate(dateTimeFormatter.format(currentLocalDate));
				updBehaviorPatternMessage = iBehaviorPatternDataService.updateBehaviorPattern(erId, behaviorPatternDTO);
				return ResponseEntity.status(HttpStatus.OK).body(updBehaviorPatternMessage);
			} else {
				return ResponseEntity.status(HttpStatus.FORBIDDEN).body(BehaviorPatternConstants.NOT_AUTHORIZED);
			}
		} catch (BehaviorPatternApiException ex) {
			logit.error(BehaviorPatternConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(BehaviorPatternConstants.EXCEPTION_MESSAGE);
		}
		
	}
	/**
	 * this method will give all the Behavior Pattern data or records per page for My Items request
	 * 
	 * @param - ListTableParams (contains sort, filter conditions; page number, page
	 *          size)
	 */
	@GetMapping(value = { "/getmybehaviorpatterns/" }, headers = "Accept=application/json")
	public ResponseEntity getMyBehaviorPatterns(ListTableParams listTableParams) {
		PaginationResult paginationResult;
		try {
			Authentication auth =  SecurityContextHolder.getContext().getAuthentication();
			if (auth != null) {
				AppUser user = (AppUser) auth.getPrincipal();
				if (listTableParams.getSearchBy() == null) {
					listTableParams.setSearchBy(new ArrayList <String>());
					listTableParams.setSearchInput(new ArrayList <String>());
				}
				listTableParams.getSearchBy().add(BehaviorPatternConstants.USER_SYSTEM_ID);
				listTableParams.getSearchInput().add(user.getUserSystemId());
			}
			paginationResult = iBehaviorPatternDataService.getBehaviorPatternsList(listTableParams);
		} catch (BehaviorPatternApiException  ex) {
			logit.error(BehaviorPatternConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(BehaviorPatternConstants.EXCEPTION_MESSAGE);
		}
		return ResponseEntity.status(HttpStatus.OK).body(paginationResult);
	}
}



