//package com.optum.fads.pgp.reportsection.api.mapper;
//
//import static org.junit.jupiter.api.Assertions.*;
//
//import org.junit.jupiter.api.Test;
//
//import com.optum.fads.pgp.reportsection.api.domain.PrmRiRptItemT;
//import com.optum.fads.pgp.reportsection.api.domain.PrmRsRptSecT;
//import com.optum.fads.pgp.reportsection.api.dto.ReportItemDTO;
//import com.optum.fads.pgp.reportsection.api.dto.ReportSectionDTO;
//
//class ReportGroupDetailMapperTest {
//
//    private final ReportGroupDetailMapper mapper = ReportGroupDetailMapper.INSTANCE;
//
//    @Test
//    void convertToPrmRiRptItemT_mapsFieldsAndNestedUserIds() {
//        ReportItemDTO dto = new ReportItemDTO();
//        dto.setReportItemId(101);
//        dto.setReportItemName("Item-101");
//        dto.setCalcFMT(11);
//        dto.setMinimumDenominator(5);
//        dto.setDivideConstant(2);
//        dto.setMultipleConstant(3);
//        dto.setCreatedBySystemId("UCR");
//        dto.setModifiedBySystemId("UUPD");
//
//        PrmRiRptItemT entity = mapper.convertToPrmRiRptItemT(dto);
//
//        assertNotNull(entity);
//        assertEquals(Integer.valueOf(101), entity.getRiId());
//        assertEquals("Item-101", entity.getReportItemName());
//        assertEquals("FMT", entity.getRiCalcFmt());
//        assertEquals(Integer.valueOf(5), entity.getRiMinimumDenom());
//        assertEquals(Integer.valueOf(2), entity.getConstantDen());
//        assertEquals(Integer.valueOf(3), entity.getConstantNum());
//
//        assertNotNull(entity.getUiUserBaseCr());
//        assertEquals("UCR", entity.getUiUserBaseCr().getUiSystemId());
//
//        assertNotNull(entity.getUiUserBaseUpd());
//        assertEquals("UUPD", entity.getUiUserBaseUpd().getUiSystemId());
//    }
//
//    @Test
//    void convertToPrmRsRptSecT_mapsFieldsAndNestedUserIds() {
//        ReportSectionDTO dto = new ReportSectionDTO();
//        dto.setReportSectionId(201);
//        dto.setReportSectionName("Section-201");
//        dto.setCreatedBySystemId("UCR");
//        dto.setModifiedBySystemId("UUPD");
//
//        PrmRsRptSecT entity = mapper.convertToPrmRsRptSecT(dto);
//
//        assertNotNull(entity);
//        assertEquals(Integer.valueOf(201), entity.getRsId());
//        assertEquals("Section-201", entity.getReportSectionName());
//
//        assertNotNull(entity.getUiUserBaseCr());
//        assertEquals("UCR", entity.getUiUserBaseCr().getUiSystemId());
//
//        assertNotNull(entity.getUiUserBaseUpd());
//        assertEquals("UUPD", entity.getUiUserBaseUpd().getUiSystemId());
//    }
//}
//package com.optum.fads.pgp.reportsection.api.repository;
//
//import static org.junit.jupiter.api.Assertions.*;
//
//import java.util.Arrays;
//import java.util.List;
//
//import jakarta.persistence.EntityManager;
//
//import org.junit.jupiter.api.Test;
//import org.springframework.beans.factory.annotation.Autowired;
//import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
//import org.springframework.test.context.TestPropertySource;
//
//import com.optum.fads.pgp.reportsection.api.domain.PrmErDrT;
//import com.optum.fads.pgp.reportsection.api.domain.PrmErdrTPK;
//import com.optum.fads.pgp.reportsection.api.repo.BehaviorPatternErDrRepository;
//
//@DataJpaTest
//@TestPropertySource(properties = {
//        "spring.jpa.hibernate.ddl-auto=create-drop",
//        "spring.flyway.enabled=false",
//        "spring.liquibase.enabled=false"
//})
//class BehaviorPatternErDrRepositoryTest {
//
//    @Autowired private BehaviorPatternErDrRepository repo;
//    @Autowired private EntityManager em;
//
//    @Test
//    void retrieveErDrValues_returnsOrderedByDrId() {
//        persistErDr(10, 2);
//        persistErDr(10, 1);
//        em.flush();
//        em.clear();
//
//        List<PrmErDrT> list = repo.retrieveErDrValues(10);
//
//        assertEquals(2, list.size());
//        assertEquals(Integer.valueOf(1), list.get(0).getId().getDrId());
//        assertEquals(Integer.valueOf(2), list.get(1).getId().getDrId());
//    }
//
//    @Test
//    void deleteErDrById_deletesRows() {
//        persistErDr(20, 1);
//        persistErDr(20, 2);
//        persistErDr(21, 1);
//        em.flush();
//
//        int deleted = repo.deleteErDrById(20);
//        em.flush();
//
//        assertEquals(2, deleted);
//        assertEquals(0, repo.retrieveErDrValues(20).size());
//        assertEquals(1, repo.retrieveErDrValues(21).size());
//    }
//
//    @Test
//    void deleteErDrs_deletesRowsForMultipleErIds() {
//        persistErDr(30, 1);
//        persistErDr(31, 1);
//        persistErDr(32, 1);
//        em.flush();
//
//        int deleted = repo.deleteErDrs(Arrays.asList(30, 31));
//        em.flush();
//
//        assertEquals(2, deleted);
//        assertEquals(0, repo.retrieveErDrValues(30).size());
//        assertEquals(0, repo.retrieveErDrValues(31).size());
//        assertEquals(1, repo.retrieveErDrValues(32).size());
//    }
//
//    private void persistErDr(int erId, int drId) {
//        PrmErdrTPK pk = new PrmErdrTPK();
//        pk.setErId(erId);
//        pk.setDrId(drId);
//
//        PrmErDrT e = new PrmErDrT();
//        e.setId(pk);
//
//        em.persist(e);
//    }
//}//package com.optum.fads.pgp.reportsection.api.repository;
//
//import static org.junit.jupiter.api.Assertions.*;
//
//import java.util.Arrays;
//import java.util.List;
//
//import jakarta.persistence.EntityManager;
//
//import org.junit.jupiter.api.Disabled;
//import org.junit.jupiter.api.Test;
//import org.springframework.beans.factory.annotation.Autowired;
//import org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
//import org.springframework.test.context.TestPropertySource;
//
//import com.optum.fads.pgp.reportsection.api.domain.PrmBpBehaviorPatsT;
//import com.optum.fads.pgp.reportsection.api.repo.BehaviorPatternsRepository;
//
//@DataJpaTest
//@TestPropertySource(properties = {
//        "spring.jpa.hibernate.ddl-auto=create-drop",
//        "spring.flyway.enabled=false",
//        "spring.liquibase.enabled=false"
//})
//class BehaviorPatternsRepositoryTest {
//
//    @Autowired private BehaviorPatternsRepository repo;
//    @Autowired private EntityManager em;
//
//    @Test
//    void getBehaviorPatternById_returnsRow() {
//        PrmBpBehaviorPatsT bp = new PrmBpBehaviorPatsT();
//        bp.setBpId(1001);
//        bp.setBehaviorPatternName("BP-1001");
//        em.persist(bp);
//        em.flush();
//        em.clear();
//
//        PrmBpBehaviorPatsT found = repo.getBehaviorPatternById(1001);
//        assertNotNull(found);
//        assertEquals(Integer.valueOf(1001), found.getBpId());
//    }
//
//    @Test
//    void getBehaviorPatternsByIds_returnsAll() {
//        persistBp(2001);
//        persistBp(2002);
//        persistBp(2003);
//        em.flush();
//        em.clear();
//
//        List<PrmBpBehaviorPatsT> list = repo.getBehaviorPatternsByIds(Arrays.asList(2001, 2003));
//        assertEquals(2, list.size());
//    }
//
//    @Disabled("Enable after persisting PrmBpRiFormulaT mapping rows")
//    @Test
//    void getAvailableBehaviorPatterns_excludesLinkedOnes() {
//        // TODO: persist bp rows + formula rows linking riId to bpId
//        // List<PrmBpBehaviorPatsT> list = repo.getAvailableBehaviorPatterns(riId);
//        // assertNotNull(list);
//    }
//
//    @Disabled("Enable after confirming JPQL works with your Hibernate version/schema")
//    @Test
//    void retrieveBehaviorPatternById_returnsProjection() {
//        // List<Object[]> rows = repo.retrieveBehaviorPatternById(behaviorPatternId);
//        // assertNotNull(rows);
//    }
//
//    private void persistBp(int bpId) {
//        PrmBpBehaviorPatsT bp = new PrmBpBehaviorPatsT();
//        bp.setBpId(bpId);
//        bp.setBehaviorPatternName("BP-" + bpId);
//        em.persist(bp);
//    }
//}
