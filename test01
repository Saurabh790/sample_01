CREATE TABLE TXN_STAGE (
  stage_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  run_id VARCHAR(80) NOT NULL,
  invoice_date DATE NOT NULL,
  txn_id BIGINT NOT NULL,
  customer_id VARCHAR(20),
  product_id VARCHAR(20),
  base_amount DECIMAL(18,2),

  -- allow NULLs for POC
  discount_rate DECIMAL(5,2),
  tax_rate DECIMAL(5,2),

  discount DECIMAL(18,2),
  tax DECIMAL(18,2),
  commission DECIMAL(18,2),
  net_amount DECIMAL(18,2),
  created_at TIMESTAMP NOT NULL
);
