[ERROR] Tests run: 10, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 3.526 s <<< FAILURE! -- in com.optum.fads.pgp.jobs.api.service.impl.JobMonitorDataServiceTest
[ERROR] com.optum.fads.pgp.jobs.api.service.impl.JobMonitorDataServiceTest.getJobDetailsByIdTest -- Time elapsed: 0.034 s <<< ERROR!
JobId : null; HttpStatus : null
        at com.optum.fads.pgp.jobs.api.service.impl.JobMonitorDataService.getJobDetailsById(JobMonitorDataService.java:121)
        at com.optum.fads.pgp.jobs.api.service.impl.JobMonitorDataServiceTest.getJobDetailsByIdTest(JobMonitorDataServiceTest.java:109)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at org.mockito.internal.runners.DefaultInternalRunner$1$1.evaluate(DefaultInternalRunner.java:55)
        at org.mockito.internal.runners.DefaultInternalRunner$1.run(DefaultInternalRunner.java:100)
        at org.mockito.internal.runners.DefaultInternalRunner.run(DefaultInternalRunner.java:107)
        at org.mockito.internal.runners.StrictRunner.run(StrictRunner.java:42)
        at org.mockito.junit.MockitoJUnitRunner.run(MockitoJUnitRunner.java:163)

[INFO] Running com.optum.fads.pgp.jobs.api.service.impl.UserDetailsServiceTest
2025-12-16T19:32:10.037+05:30  INFO  --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-12-16T19:32:10.037+05:30  INFO  --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-12-16T19:32:10.037+05:30  INFO  --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.202 s -- in com.optum.fads.pgp.jobs.api.service.impl.UserDetailsServiceTest
[INFO] Running com.optum.fads.pgp.jobs.api.service.impl.util.ServiceUtilTest
[INFO] Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.070 s -- in com.optum.fads.pgp.jobs.api.service.impl.util.ServiceUtilTest
[INFO]
[INFO] Results:
[INFO]
[ERROR] Errors:
[ERROR]   JobMonitorControllerTest.canceljobByIdTest:102 UnfinishedStubbing
Unfinished stubbing detected here:
-> at com.optum.fads.pgp.jobs.api.controller.JobMonitorControllerTest.purgeJobsByIdTest(JobMonitorControllerTest.java:117)

E.g. thenReturn() may be missing.
Examples of correct stubbing:
    when(mock.isOk()).thenReturn(true);
    when(mock.isOk()).thenThrow(exception);
    doThrow(exception).when(mock).someVoidMethod();
Hints:
 1. missing thenReturn()
 2. you are trying to stub a final method, which is not supported
 3. you are stubbing the behaviour of another mock inside before 'thenReturn' instruction is completed

[ERROR]   JobMonitorControllerTest.changeDateByIdTest:234 NullPointer Cannot invoke "org.springframework.test.web.servlet.MockMvc.perform(org.springframework.test.web.servlet.RequestBuilder)" because "this.mockMvc" is null
[ERROR]   JobMonitorControllerTest.changePurgeDateByIdTest_badRequest_whenStatus20:164 NullPointer Cannot invoke "java.util.List.get(int)" because "this.jobDTOS" is null
[ERROR]   JobMonitorControllerTest.changePurgeDateByIdTest_ok:149 NullPointer Cannot invoke "java.util.List.get(int)" because "this.jobDTOS" is null
[ERROR]   JobMonitorControllerTest.changeScheduleDateByIdTest:138 NullPointer Cannot invoke "java.util.List.get(int)" because "this.jobDTOS" is null
[ERROR]   JobMonitorControllerTest.getJobDetailsByIdTest:219 NullPointer Cannot invoke "com.optum.fads.pgp.jobs.api.dto.PaginationResult.getJobsData()" because "this.result" is null
[ERROR]   JobMonitorControllerTest.getJobsByParmsTest:182 NullPointer Cannot invoke "org.springframework.test.web.servlet.MockMvc.perform(org.springframework.test.web.servlet.RequestBuilder)" because "this.mockMvc" is null
[ERROR]   JobMonitorControllerTest.getMyJobsByParmsTest:200 UnfinishedStubbing
Unfinished stubbing detected here:
-> at com.optum.fads.pgp.jobs.api.controller.JobMonitorControllerTest.getJobDetailsByIdTest(JobMonitorControllerTest.java:218)

E.g. thenReturn() may be missing.
Examples of correct stubbing:
    when(mock.isOk()).thenReturn(true);
    when(mock.isOk()).thenThrow(exception);
    doThrow(exception).when(mock).someVoidMethod();
Hints:
 1. missing thenReturn()
 2. you are trying to stub a final method, which is not supported
 3. you are stubbing the behaviour of another mock inside before 'thenReturn' instruction is completed

[ERROR]   JobMonitorControllerTest.getreportURLTest:247 NullPointer Cannot invoke "org.springframework.test.web.servlet.MockMvc.perform(org.springframework.test.web.servlet.RequestBuilder)" because "this.mockMvc" is null
[ERROR]   JobMonitorControllerTest.purgeJobsByIdTest:118 NullPointer Cannot invoke "java.util.List.get(int)" because "this.jobDTOS" is null
[ERROR]   JobMonitorDataServiceTest.getJobDetailsByIdTest:109 Â» JobsMonitorApi Cannot invoke "java.util.List.isEmpty()" because "jobMasterLogs" is null
[INFO]
[ERROR] Tests run: 23, Failures: 0, Errors: 11, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  27.877 s
[INFO] Finished at: 2025-12-16T19:32:10+05:30
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.5.4:test (default-test) on project fads-pgp-jobmonitor-api:
[ERROR]
[ERROR] See C:\Users\sgupt664\BE_Projects\fads-pgp-jobmonitor-api\target\surefire-reports for the individual test results.
[ERROR] See dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException

C:\Users\sgupt664\BE_Projects\fads-pgp-jobmonitor-api>

above is errors
below is pom

<?xml version="1.0" encoding="UTF-8"?>
<project
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
        xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.optum.fads</groupId>
    <artifactId>fads-pgp-jobmonitor-api</artifactId>
    <version>1.0.0</version>
    <packaging>jar</packaging>

    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.5.7</version>
        <relativePath/>
    </parent>
    <repositories>
        <repository>
            <id>artifactory</id>
            <name>Artifactory</name>
            <url>https://repo1.uhc.com/artifactory/repo</url>
        </repository>
    </repositories>    

    <properties>
        <maven.test.skip>false</maven.test.skip>
        <skipTests>${maven.test.skip}</skipTests>
        <failsafe.skip>${skipTests}</failsafe.skip>

        <java.version>17</java.version>
        <spring.boot.version>3.5.7</spring.boot.version>
        <spring.cloud.version>2023.0.2</spring.cloud.version>
        <jasypt.version>2.1.0</jasypt.version>
        <jwt.version>3.8.3</jwt.version>
        <modelmapper.version>3.1.1</modelmapper.version>
        <jacoco.version>0.8.10</jacoco.version>
        <guava.version>32.1.2-jre</guava.version>
        <logback.encoder.version>7.4</logback.encoder.version>
        <lombok.version>1.18.38</lombok.version>
        <restassured.version>5.3.0</restassured.version>
        <mockito.version>5.4.0</mockito.version>
        <sonar.exclusions>**/constants/**,**/domain/**</sonar.exclusions>
        <javax-ws-rs-api.version>2.1.2</javax-ws-rs-api.version>
        <org.mapstruct.version>1.6.3</org.mapstruct.version>
        <log4j.version>2.20.0</log4j.version>
        <snowflake-jdbc.version>3.23.1</snowflake-jdbc.version>
        <snakeyaml.version>2.1</snakeyaml.version>
        <jaxb.version>2.3.3</jaxb.version>
        <sonar.version>3.9.2.2185</sonar.version>
        <commons.collections4>4.4</commons.collections4>
        <bcp.version>1.78</bcp.version>
        <mssql.jdbc.version>13.2.1.jre11</mssql.jdbc.version>
    </properties>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring.boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.springframework.cloud</groupId>
                <artifactId>spring-cloud-dependencies</artifactId>
                <version>${spring.cloud.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>com.azure.spring</groupId>
                <artifactId>spring-cloud-azure-dependencies</artifactId>
                <version>5.22.0</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
            <dependency>
                <groupId>org.apache.logging.log4j</groupId>
                <artifactId>log4j-bom</artifactId>
                <version>${log4j.version}</version>
                <scope>import</scope>
                <type>pom</type>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <dependencies>
        <!-- Spring Boot Dependencies -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-validation</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-webflux</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-oauth2-resource-server</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-oauth2-jose</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
        </dependency>
        <dependency>
            <groupId>com.azure</groupId>
            <artifactId>azure-core</artifactId>
        </dependency>
        <dependency>
            <groupId>com.azure.spring</groupId>
            <artifactId>spring-cloud-azure-starter-keyvault-secrets</artifactId>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.19.0</version>
        </dependency>
        <dependency>
            <groupId>org.modelmapper</groupId>
            <artifactId>modelmapper</artifactId>
            <version>${modelmapper.version}</version>
        </dependency>
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>${lombok.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>net.logstash.logback</groupId>
            <artifactId>logstash-logback-encoder</artifactId>
            <version>${logback.encoder.version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.codehaus.janino</groupId>
            <artifactId>janino</artifactId>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-core</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.mapstruct</groupId>
            <artifactId>mapstruct</artifactId>
            <version>${org.mapstruct.version}</version>
        </dependency>
        <dependency>
            <groupId>org.mapstruct</groupId>
            <artifactId>mapstruct-jdk8</artifactId>
            <version>${org.mapstruct.version}</version>
        </dependency>
        <dependency>
            <groupId>org.mapstruct</groupId>
            <artifactId>mapstruct-processor</artifactId>
            <version>${org.mapstruct.version}</version>
        </dependency>
        <dependency>
            <groupId>com.microsoft.sqlserver</groupId>
            <artifactId>mssql-jdbc</artifactId>
            <version>${mssql.jdbc.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-collections4</artifactId>
            <version>${commons.collections4}</version>
        </dependency>
        <dependency>
            <groupId>net.snowflake</groupId>
            <artifactId>snowflake-jdbc</artifactId>
            <version>${snowflake-jdbc.version}</version>
        </dependency>
        <dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcprov-jdk18on</artifactId>
            <version>${bcp.version}</version>
        </dependency>
        <dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcpkix-jdk18on</artifactId>
            <version>${bcp.version}</version>
        </dependency>
        <dependency>
            <groupId>org.yaml</groupId>
            <artifactId>snakeyaml</artifactId>
            <version>${snakeyaml.version}</version>
        </dependency>
        <dependency>
            <groupId>io.netty</groupId>
            <artifactId>netty-bom</artifactId>
            <version>4.1.125.Final</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
        <dependency>
		  <groupId>org.junit.vintage</groupId>
		  <artifactId>junit-vintage-engine</artifactId>
		  <scope>test</scope>
		</dependency>
    </dependencies>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.projectlombok</groupId>
                    <artifactId>lombok-maven-plugin</artifactId>
                    <version>${lombok.version}</version>
                    <dependencies>
                        <dependency>
                            <groupId>org.projectlombok</groupId>
                            <artifactId>lombok</artifactId>
                            <version>${lombok.version}</version>
                        </dependency>
                    </dependencies>
                </plugin>
                <plugin>
                    <groupId>org.jacoco</groupId>
                    <artifactId>jacoco-maven-plugin</artifactId>
                    <version>${jacoco.version}</version>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>install</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.directory}/lib</outputDirectory>
                            <excludeScope>provided</excludeScope>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-enforcer-plugin</artifactId>
                <executions>
                    <execution>
                        <id>enforce-maven</id>
                        <goals>
                            <goal>enforce</goal>
                        </goals>
                        <configuration>
                            <rules>
                                <requireMavenVersion>
                                    <version>3.3.9</version>
                                </requireMavenVersion>
                            </rules>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>repackage</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>io.github.git-commit-id</groupId>
                <artifactId>git-commit-id-maven-plugin</artifactId>
                <version>9.0.1</version>
                <executions>
                    <execution>
                        <id>get-the-git-infos</id>
                        <goals>
                            <goal>revision</goal>
                        </goals>
                        <phase>initialize</phase>
                    </execution>
                </executions>
                <configuration>
                    <dotGitDirectory>${project.basedir}/.git</dotGitDirectory>
                    <generateGitPropertiesFile>true</generateGitPropertiesFile>
                </configuration>
            </plugin>
            <!-- Below plugin ensures the execution of test cases during maven build-->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <executions>
                    <execution>
                        <id>integration-test</id>
                        <goals>
                            <goal>integration-test</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>verify</id>
                        <goals>
                            <goal>verify</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <skip>${failsafe.skip}</skip>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.jacoco</groupId>
                <artifactId>jacoco-maven-plugin</artifactId>
                <version>${jacoco.version}</version>
                <configuration>
                    <destFile>target/jacoco.exec</destFile>
                </configuration>
                <executions>
                    <execution>
                        <id>jacoco-initialize</id>
                        <goals>
                            <goal>prepare-agent</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>jacoco-site</id>
                        <phase>package</phase>
                        <goals>
                            <goal>report</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

        </plugins>
    </build>
</project>


current test class

package com.optum.fads.pgp.jobs.api.controller;

import static org.mockito.ArgumentMatchers.any;
import static org.mockito.ArgumentMatchers.anyInt;
import static org.mockito.ArgumentMatchers.anyLong;
import static org.mockito.ArgumentMatchers.eq;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

import java.util.ArrayList;
import java.util.List;

import org.apache.tomcat.util.json.ParseException;
import org.aspectj.lang.annotation.Before;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.MockitoAnnotations;
import org.mockito.junit.jupiter.MockitoExtension;
import org.springframework.http.MediaType;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.context.SecurityContext;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.ResultActions;
import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;
import org.springframework.test.web.servlet.setup.MockMvcBuilders;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.optum.fads.pgp.jobs.api.common.JobsConstants;
import com.optum.fads.pgp.jobs.api.common.ListTableParams;
import com.optum.fads.pgp.jobs.api.dto.FadsUser;
import com.optum.fads.pgp.jobs.api.dto.JobDTO;
import com.optum.fads.pgp.jobs.api.dto.PaginationResult;
import com.optum.fads.pgp.jobs.api.service.IJobMonitorDataService;
import com.optum.fads.pgp.jobs.api.snowflakeDomain.JobMasterT;
import com.optum.fads.pgp.jobs.api.util.TestUtil;

@ExtendWith(MockitoExtension.class)
public class JobMonitorControllerTest {

    private MockMvc mockMvc;

    @Mock
    private IJobMonitorDataService iJobMonitorDataService;

    @Mock
    private FadsUser appUser;

    @Mock
    private Authentication authentication;

    @Mock
    private SecurityContext securityContext;

    @InjectMocks
    private JobMonitorController jobMonitorController;

    private ObjectMapper objectMapper;

    private PaginationResult result;
    private ListTableParams listTableParams;
    private List<JobDTO> jobDTOS;

    public void setUp() throws ParseException, java.text.ParseException {
        MockitoAnnotations.initMocks(this);

        mockMvc = MockMvcBuilders
                .standaloneSetup(jobMonitorController)
                .build();

        // SecurityContextHolder setup used by controller
        Mockito.when(securityContext.getAuthentication()).thenReturn(authentication);
        SecurityContextHolder.setContext(securityContext);

        // controller does: SecurityContextHolder.getContext().getAuthentication().getPrincipal()
        Mockito.when(SecurityContextHolder.getContext().getAuthentication().getPrincipal())
                .thenReturn(appUser);

        Mockito.when(appUser.getUserSystemId()).thenReturn("test-user");

        listTableParams = new ListTableParams();
        listTableParams.setPageNumber(1);
        listTableParams.setRecordsPerPage(10);
        listTableParams.setSortBy("jobId");
        listTableParams.setSortOrder(-1);

        result = new PaginationResult();

        List<JobMasterT> jobMasterSnowFlakeTS = new ArrayList<>();
        jobMasterSnowFlakeTS.add(TestUtil.initializeJobs(10));

        jobDTOS = TestUtil.populateJobDataList(jobMasterSnowFlakeTS);
        result.setJobsData(jobDTOS);

        objectMapper = new ObjectMapper();
    }

    @Test
    public void canceljobByIdTest() throws Exception {
        Mockito.when(iJobMonitorDataService.getJobDetailsById(anyInt()))
                .thenReturn(jobDTOS.get(0));
        Mockito.when(iJobMonitorDataService.cancelJob(any(JobDTO.class)))
                .thenReturn(JobsConstants.JOB_CANCELED);

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.put("/canceljob/10")
                        .contentType(MediaType.APPLICATION_JSON)
        );

        perform.andExpect(status().isOk());
    }

    @Test
    public void purgeJobsByIdTest() throws Exception {
        Mockito.when(iJobMonitorDataService.getJobDetailsById(anyInt()))
                .thenReturn(jobDTOS.get(0));
        Mockito.when(iJobMonitorDataService.purgeJob(any(JobDTO.class)))
                .thenReturn(JobsConstants.JOB_PURGED);

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.delete("/purgejob/10")
                        .contentType(MediaType.APPLICATION_JSON)
        );

        perform.andExpect(status().isOk());
    }

    @Test
    public void changeScheduleDateByIdTest() throws Exception {
        Mockito.when(iJobMonitorDataService.changeScheduleDateById(any(JobDTO.class)))
                .thenReturn(JobsConstants.RUN_DATE_SAVED);

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.put("/changescheduledate")
                        .contentType(MediaType.APPLICATION_JSON)
                        .content(objectMapper.writeValueAsString(jobDTOS.get(0)))
        );

        perform.andExpect(status().isOk());
    }

    @Test
    public void changePurgeDateByIdTest_ok() throws Exception {
        Mockito.when(iJobMonitorDataService.changePurgeDateById(any(JobDTO.class)))
                .thenReturn(JobsConstants.PURGE_DATE_SAVED);

        JobDTO jobDTO = jobDTOS.get(0);
        jobDTO.setStatus(10); // IMPORTANT: must NOT be 20 (controller validates status != 20)

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.put("/changepurgedate")
                        .contentType(MediaType.APPLICATION_JSON)
                        .content(objectMapper.writeValueAsString(jobDTO))
        );

        perform.andExpect(status().isOk());
    }

    @Test
    public void changePurgeDateByIdTest_badRequest_whenStatus20() throws Exception {
        // even if service would return OK, controller should block before calling service
        JobDTO jobDTO = jobDTOS.get(0);
        jobDTO.setStatus(20);

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.put("/changepurgedate")
                        .contentType(MediaType.APPLICATION_JSON)
                        .content(objectMapper.writeValueAsString(jobDTO))
        );

        perform.andExpect(status().isBadRequest());
    }

    @Test
    public void getJobsByParmsTest() throws Exception {
        // IMPORTANT: controller creates NEW ListTableParams, so use any()
        Mockito.when(iJobMonitorDataService.getJobsByListTableParms(any(ListTableParams.class)))
                .thenReturn(result);

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.get("/getjobs/")
                        // IMPORTANT: mapping requires Accept=application/json
                        .accept(MediaType.APPLICATION_JSON)
                        // These params must bind to ListTableParamsReq fields
                        .param("pageNumber", "1")
                        .param("recordsPerPage", "10")
                        .param("sortBy", "jobId")
                        .param("sortOrder", "-1")
                        // controller takes searchInput as separate argument
                        .param("searchInput", "abc")
        );

        perform.andExpect(status().isOk());
    }

    @Test
    public void getMyJobsByParmsTest() throws Exception {
        Mockito.when(iJobMonitorDataService.getJobsByListTableParms(any(ListTableParams.class)))
                .thenReturn(result);

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.get("/getmyjobs/")
                        // IMPORTANT: mapping requires Accept=application/json
                        .accept(MediaType.APPLICATION_JSON)
                        .param("pageNumber", "1")
                        .param("recordsPerPage", "10")
                        .param("sortBy", "jobId")
                        .param("sortOrder", "-1")
        );

        perform.andExpect(status().isOk());
    }

    @Test
    public void getJobDetailsByIdTest() throws Exception {
        Mockito.when(iJobMonitorDataService.getJobDetailsById(eq(10)))
                .thenReturn(result.getJobsData().get(0));

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.get("/getjobdetails/10")
                        .accept(MediaType.APPLICATION_JSON)
        );

        perform.andExpect(status().isOk());
    }

    @Test
    public void changeDateByIdTest() throws Exception {
        Mockito.when(iJobMonitorDataService.changeDatesById(eq(10)))
                .thenReturn(JobsConstants.CHANGE_DATES_INVALID_REQUEST);

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.get("/changedates/10")
                        .accept(MediaType.APPLICATION_JSON)
        );

        perform.andExpect(status().isOk());
    }

    @Test
    public void getreportURLTest() throws Exception {
        Mockito.when(iJobMonitorDataService.getReportUrlByOptionCd(anyLong()))
                .thenReturn("COGNOS_REPORT_URL");

        ResultActions perform = mockMvc.perform(
                MockMvcRequestBuilders.get("/getreporturl/300")
                        .accept(MediaType.APPLICATION_JSON)
        );

        perform.andExpect(status().isOk());
    }
}


below is application.yaml
