@Test
void testUpdateUser_withGroupAssignments() {
    // ... (everything above unchanged)

    // Verify SeUserGroup group assignments
    ArgumentCaptor<SeUsrGrp> seUserGroupCaptor = ArgumentCaptor.forClass(SeUsrGrp.class);
    verify(seUsrGrpRepository, times(1)).save(seUserGroupCaptor.capture());

    SeUsrGrp capturedSeUserGroup = seUserGroupCaptor.getValue();

    // These can stay as-is if the entity fields are BigDecimal and setters accept Integer;
    // what matters is that expected and actual are same type.
    assertEquals(BigDecimal.valueOf(5),  capturedSeUserGroup.getFadsGrp());
    assertEquals(BigDecimal.valueOf(10), capturedSeUserGroup.getFadsSurGrp());
    assertEquals(BigDecimal.valueOf(15), capturedSeUserGroup.getFadsCaseGrp());

    // Verify history record creation
    ArgumentCaptor<UserListItemHistoryRequest> historyCaptor =
            ArgumentCaptor.forClass(UserListItemHistoryRequest.class);
    verify(userHistory, times(1)).createHistory(historyCaptor.capture());

    UserListItemHistoryRequest historyRequest = historyCaptor.getValue();
    assertEquals("john.doe@example.com", historyRequest.getUiUserId());
    assertEquals("JD12345678", historyRequest.getUiSystemId());

    // ðŸ”§ use BigDecimal to match historyRequest field types
    assertEquals(BigDecimal.valueOf(5),  historyRequest.getFadsGrpId());
    assertEquals(BigDecimal.valueOf(10), historyRequest.getFadsSurGrpId());
    assertEquals(BigDecimal.valueOf(15), historyRequest.getFadsCaseGrpId());
}
