2026-01-02T11:31:30.696+05:30  INFO  --- [           main] c.o.f.c.a.s.impl.ReminderEmailService    : sendAllReminderMails starts...
2026-01-02T11:31:30.697+05:30  INFO  --- [           main] c.o.f.c.a.s.impl.ReminderEmailService    : sendAllReminderMails Exception = Cannot invoke "com.optum.fads.casereminders.api.domain.CaEmailsTPK.getCaseId()" because the return value of "com.optum.fads.casereminders.api.domain.CaEmailsT.getId()" is null
2026-01-02T11:31:30.697+05:30  INFO  --- [           main] c.o.f.c.a.s.impl.ReminderEmailService    : sendAllReminderMails ends...
[ERROR] Tests run: 4, Failures: 1, Errors: 2, Skipped: 0, Time elapsed: 0.656 s <<< FAILURE! -- in com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest
[ERROR] com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailTrue_marksSentAndSaves -- Time elapsed: 0.590 s <<< FAILURE!
Wanted but not invoked:
remindersUtil.sendMail(
    <any com.optum.fads.casereminders.api.dto.EmailSpecs>
);
-> at com.optum.fads.casereminders.api.general.CaseRemindersUtil.sendMail(CaseRemindersUtil.java:107)

However, there was exactly 1 interaction with this mock:
remindersUtil.getEmailSpecs();
-> at com.optum.fads.casereminders.api.service.impl.ReminderEmailService.sendAllReminderMails(ReminderEmailService.java:40)


        at com.optum.fads.casereminders.api.general.CaseRemindersUtil.sendMail(CaseRemindersUtil.java:107)
        at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailTrue_marksSentAndSaves(ReminderEmailServiceTest.java:62)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)

[ERROR] com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenExceptionThrown_doesNotFailTestRun -- Time elapsed: 0.007 s <<< ERROR!
java.lang.RuntimeException: db down
        at com.optum.fads.casereminders.api.service.impl.ReminderEmailService.sendAllReminderMails(ReminderEmailService.java:39)
        at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenExceptionThrown_doesNotFailTestRun(ReminderEmailServiceTest.java:92)
        at java.base/java.lang.reflect.Method.invoke(Method.java:568)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)

[ERROR] com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave -- Time elapsed: 0.013 s <<< ERROR!
org.mockito.exceptions.misusing.UnnecessaryStubbingException:

Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:70)
  2. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:71)
  3. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:72)
  4. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:73)
  5. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:74)
  6. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:79)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
        at org.mockito.junit.jupiter.MockitoExtension.lambda$afterEach$2(MockitoExtension.java:200)
        at java.base/java.util.Optional.ifPresent(Optional.java:178)
        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:198)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)

[INFO]
[INFO] Results:
[INFO]
[ERROR] Failures:
[ERROR]   ReminderEmailServiceTest.sendAllReminderMails_whenSendMailTrue_marksSentAndSaves:62
Wanted but not invoked:
remindersUtil.sendMail(
    <any com.optum.fads.casereminders.api.dto.EmailSpecs>
);
-> at com.optum.fads.casereminders.api.general.CaseRemindersUtil.sendMail(CaseRemindersUtil.java:107)

However, there was exactly 1 interaction with this mock:
remindersUtil.getEmailSpecs();
-> at com.optum.fads.casereminders.api.service.impl.ReminderEmailService.sendAllReminderMails(ReminderEmailService.java:40)


[ERROR] Errors:
[ERROR]   ReminderEmailServiceTest.sendAllReminderMails_whenExceptionThrown_doesNotFailTestRun:92 » Runtime db down
[ERROR]   ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave » UnnecessaryStubbing
Unnecessary stubbings detected.
Clean & maintainable test code requires zero unnecessary code.
Following stubbings are unnecessary (click to navigate to relevant line of code):
  1. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:70)
  2. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:71)
  3. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:72)
  4. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:73)
  5. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:74)
  6. -> at com.optum.fads.casereminders.api.service.impl.ReminderEmailServiceTest.sendAllReminderMails_whenSendMailFalse_doesNotSave(ReminderEmailServiceTest.java:79)
Please remove unnecessary stubbings or use 'lenient' strictness. More info: javadoc for UnnecessaryStubbingException class.
[INFO]
[ERROR] Tests run: 10, Failures: 1, Errors: 2, Skipped: 0
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  19.671 s
[INFO] Finished at: 2026-01-02T11:31:30+05:30
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.2.5:test (default-test) on project fads-case-reminders-api: There are test failures.
[ERROR]
[ERROR] Please refer to C:\Users\sgupt664\BE_Projects\fads-case-reminders-api\target\surefire-reports for the individual test results.
[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException

C:\Users\sgupt664\BE_Projects\fads-case-reminders-api>
