package com.optum.fads.pgp.reportsection.api.controller;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertNotNull;
import static org.mockito.Mockito.doReturn;

import java.util.ArrayList;
import java.util.List;

import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.MockitoJUnitRunner;
import org.springframework.http.ResponseEntity;
import org.springframework.test.context.web.WebAppConfiguration;

import com.optum.fads.pgp.reportsection.api.common.ListTableParams;
import com.optum.fads.pgp.reportsection.api.common.constants.ReportSectionConstants;
import com.optum.fads.pgp.reportsection.api.dto.BehaviorPatternDTO;
import com.optum.fads.pgp.reportsection.api.dto.PaginationResultRI;
import com.optum.fads.pgp.reportsection.api.dto.ReportItemDTO;
import com.optum.fads.pgp.reportsection.api.service.impl.ReportItemDataService;

@RunWith(MockitoJUnitRunner.class) 
@WebAppConfiguration
public class ReportItemControllerTests {

 //   @Autowired
 //   ReportItemController reportItemController;
 /*   @InjectMocks
    private ReportItemController reportItemController;

    @Mock
    private ReportItemDataService reportItemDataService;
    
    private ReportItemDTO reportItemDTON;
    
    @Before
    public void setUp() {
    	
    	reportItemDTON = new ReportItemDTO();
    	reportItemDTON.setReportItemId(2092);
    	
    }

    @Test
    public void testGetReportItemById(){
    	
    	doReturn(reportItemDTON).when(reportItemDataService).getReportItemById(reportItemDTON.getReportItemId());
		@SuppressWarnings("unchecked")
		ResponseEntity<ReportItemDTO> responseEntity = reportItemController.getReportItemById(reportItemDTON.getReportItemId());
        assertNotNull(responseEntity);
        assertEquals(responseEntity.getBody().getReportItemId(), reportItemDTON.getReportItemId());
        
   	//	assertEquals(reportItem.getNumeratorBehaviorPatterns().size(), 1);
    //	assertEquals(reportItem.getDenominatorBehaviorPatterns().size(), 1);
    	
    }*/
    /*
    @Test
    public void testGetReportItems(){
//	public ResponseEntity getReportItems(ListTableParams listTableParams) {
		PaginationResultRI paginationResult = new PaginationResultRI();
		List<ReportItemDTO> reportItemsList = new ArrayList<>();
		ListTableParams listTableParams = new ListTableParams();
		List<String> searchByParm = new ArrayList<>();
		List<String> searchInputParm = new ArrayList<>();
		listTableParams.setSortBy("reportItemName");
		listTableParams.setSortOrder(1);
		listTableParams.setPageNumber(1);
		listTableParams.setRecordsPerPage(10);
		searchByParm.add("reportItemName");
		searchByParm.add("createdBy");
		searchInputParm.add("opioids");
		searchInputParm.add("mcloud");
		listTableParams.setSearchBy(searchByParm);
		listTableParams.setSearchInput(searchInputParm);
		
		ReportItemDTO reportItemDTO1 = new ReportItemDTO();
    	reportItemDTO1.setReportItemId(2030);
    	reportItemDTO1.setReportItemName("O:Opioids; #clm lines");
    	reportItemDTO1.setCreatedBy("MS33686548");
    	reportItemDTO1.setRatioOf("Sum");
    	reportItemDTO1.setMinimumDenominator(1);
    	reportItemDTO1.setCalcFMT(1);
    	reportItemsList.add(reportItemDTO1);
    	
    	ReportItemDTO reportItemDTO2 = new ReportItemDTO();
    	reportItemDTO2.setReportItemId(2031);
    	reportItemDTO2.setReportItemName("O:Opioids; d# NDCs");
    	reportItemDTO2.setCreatedBy("MS33686548");
    	reportItemsList.add(reportItemDTO2);
    	
    	ReportItemDTO reportItemDTO3 = new ReportItemDTO();
    	reportItemDTO3.setReportItemId(2032);
    	reportItemDTO3.setReportItemName("O:Opioids; d# pharmacies");
    	reportItemDTO3.setCreatedBy("MS33686548");
    	reportItemsList.add(reportItemDTO3);
    	
    	ReportItemDTO reportItemDTO4 = new ReportItemDTO();
    	reportItemDTO4.setReportItemId(2033);
    	reportItemDTO4.setReportItemName("O:Opioids; d# prescribers");
    	reportItemDTO4.setCreatedBy("MS33686548");
    	reportItemsList.add(reportItemDTO4);
    	
    	ReportItemDTO reportItemDTO5 = new ReportItemDTO();
    	reportItemDTO5.setReportItemId(2034);
    	reportItemDTO5.setReportItemName("O:Opioids; sum day supply");
    	reportItemDTO5.setCreatedBy("MS33686548");
    	reportItemsList.add(reportItemDTO5);
    	
    	ReportItemDTO reportItemDTO6 = new ReportItemDTO();
    	reportItemDTO6.setReportItemId(2035);
    	reportItemDTO6.setReportItemName("O:Opioids; sum day quantity");
    	reportItemDTO6.setCreatedBy("MS33686548");
    	reportItemsList.add(reportItemDTO6);
    	
    	ReportItemDTO reportItemDTO7 = new ReportItemDTO();
    	reportItemDTO7.setReportItemId(2036);
    	reportItemDTO7.setReportItemName("O:Opioids; sum $ paid");
    	reportItemDTO7.setCreatedBy("MS33686548");
    	reportItemsList.add(reportItemDTO7);
		
    	paginationResult.setReportItemsData(reportItemsList);
    	paginationResult.setTotalRecordsCount(reportItemsList.size());
			
    	doReturn(paginationResult).when(reportItemDataService).getReportItemsList(listTableParams);
		@SuppressWarnings("unchecked")
		ResponseEntity<PaginationResultRI> responseEntity = reportItemController.getReportItems(listTableParams);
        assertNotNull(responseEntity);
		assertEquals(responseEntity.getBody().getTotalRecordsCount(), reportItemsList.size());
		
   }
    
    @Test
    public void testDeleteReportItem(){
    	List<String> deleteReportItemMessages = new ArrayList<>();
    	deleteReportItemMessages.add(ReportSectionConstants.DELETE_REPORT_ITEM_SUCCESS);
    	doReturn(deleteReportItemMessages).when(reportItemDataService).deleteReportItem(reportItemDTON.getReportItemId());
    	ResponseEntity responseEntity = reportItemController.deleteReportItemById(reportItemDTON.getReportItemId());
    	assertNotNull(responseEntity);
    	List<String> deleteReportItemOutList = (List<String>) responseEntity.getBody();
		assertEquals(ReportSectionConstants.DELETE_REPORT_ITEM_SUCCESS, deleteReportItemOutList.get(0));
    }*/
   /* 
    @Test
    public void testNewReportItem() {
		
		 String userId = "PP3188253";
		 ReportItemDTO reportItemDTO =new ReportItemDTO();
		 ReportItemDTO retReportItemDTO =new ReportItemDTO();
		 retReportItemDTO.setReportItemId(999);
		 reportItemDTO.setReportItemName("O:% Hosp Care Sub Comp to All Care Sub; #clm lines");
		 reportItemDTO.setModifiedBy(userId);
		 reportItemDTO.setOrder(1);
	    List<BehaviorPatternDTO> numBehaviorPatterns = new ArrayList<>();
	    BehaviorPatternDTO behaviorPatternDTO1 = new BehaviorPatternDTO();
	    behaviorPatternDTO1.setBehaviorPatternId(288); 
	    behaviorPatternDTO1.setType(ReportSectionConstants.NUM_STR);
	    behaviorPatternDTO1.setOperator(ReportSectionConstants.PLUS_STR);
	    numBehaviorPatterns.add(behaviorPatternDTO1);
	    BehaviorPatternDTO behaviorPatternDTO2 = new BehaviorPatternDTO();
	    behaviorPatternDTO2.setBehaviorPatternId(289); 
	    behaviorPatternDTO2.setType(ReportSectionConstants.NUM_STR );
	    behaviorPatternDTO2.setOperator(ReportSectionConstants.DEN_STR);
	    numBehaviorPatterns.add(behaviorPatternDTO2);
	    reportItemDTO.setNumeratorBehaviorPatterns(numBehaviorPatterns);
	    
	    List<BehaviorPatternDTO> denBehaviorPatterns = new ArrayList<>();
	    BehaviorPatternDTO behaviorPatternDTO3 = new BehaviorPatternDTO();
	    behaviorPatternDTO3.setBehaviorPatternId(290); 
	    behaviorPatternDTO3.setType(ReportSectionConstants.DEN_STR);
	    behaviorPatternDTO3.setOperator(ReportSectionConstants.PLUS_STR);
	    denBehaviorPatterns.add(behaviorPatternDTO3);
	    reportItemDTO.setDenominatorBehaviorPatterns(denBehaviorPatterns);			
    
	    doReturn(retReportItemDTO).when(reportItemDataService).addReportItem(reportItemDTO);
//	    when(reportItemDataService.addReportItem(any(reportItemDTO.class))).thenReturn("999");
        
        ResponseEntity<String> responseEntity = reportItemController.newReportItem(reportItemDTO);
        assertThat(responseEntity.getStatusCode()).isEqualTo(HttpStatus.OK);
  //      assertThat(responseEntity.getHeaders().getLocation().getPath()).isEqualTo("/1")
	    
    } 
   
    @Test
    public void testUpdateReportItem() {
    	
    	Integer reportItemId = 999;		// 2018
		
		 String userId = "PP3188253";
		 ReportItemDTO reportItemDTO =new ReportItemDTO();
		 reportItemDTO.setReportItemId(reportItemId);
		 reportItemDTO.setReportItemName("O:% Hosp Care Sub Comp to All Care Sub; #clm lines");
		 reportItemDTO.setModifiedBy(userId);
		 reportItemDTO.setOrder(1);
	    List<BehaviorPatternDTO> numBehaviorPatterns = new ArrayList<>();
	    BehaviorPatternDTO behaviorPatternDTO1 = new BehaviorPatternDTO();
	    behaviorPatternDTO1.setBehaviorPatternId(288); 
	    behaviorPatternDTO1.setType(ReportSectionConstants.NUM_STR);
	    behaviorPatternDTO1.setOperator(ReportSectionConstants.PLUS_STR);
	    numBehaviorPatterns.add(behaviorPatternDTO1);
	    BehaviorPatternDTO behaviorPatternDTO2 = new BehaviorPatternDTO();
	    behaviorPatternDTO2.setBehaviorPatternId(289); 
	    behaviorPatternDTO2.setType(ReportSectionConstants.NUM_STR );
	    behaviorPatternDTO2.setOperator(ReportSectionConstants.DEN_STR);
	    numBehaviorPatterns.add(behaviorPatternDTO2);
	    reportItemDTO.setNumeratorBehaviorPatterns(numBehaviorPatterns);
	    
	    List<BehaviorPatternDTO> denBehaviorPatterns = new ArrayList<>();
	    BehaviorPatternDTO behaviorPatternDTO3 = new BehaviorPatternDTO();
	    behaviorPatternDTO3.setBehaviorPatternId(290); 
	    behaviorPatternDTO3.setType(ReportSectionConstants.DEN_STR);
	    behaviorPatternDTO3.setOperator(ReportSectionConstants.PLUS_STR);
	    denBehaviorPatterns.add(behaviorPatternDTO3);
	    reportItemDTO.setDenominatorBehaviorPatterns(denBehaviorPatterns);			
    
	    doReturn(ReportSectionConstants.UPDATE_REPORT_ITEM_SUCCESS).when(reportItemDataService).updateReportItem(reportItemDTO.getReportItemId(), reportItemDTO);
//	    when(reportItemDataService.addReportItem(any(reportItemDTO.class))).thenReturn("999");
        
        ResponseEntity<String> responseEntity = reportItemController.updateReportItem(reportItemDTO.getReportItemId(), reportItemDTO);
        assertThat(responseEntity.getStatusCode()).isEqualTo(HttpStatus.OK);
  //      assertThat(responseEntity.getHeaders().getLocation().getPath()).isEqualTo("/1")
	    
    } 
  */  
    /*
    @Test
    public void testGetAvailableBehaviorPatterns(){
    	List<BehaviorPatternDTO> availableBehaviorPatternList = new ArrayList<>();
    	Integer reportItemId = 2763;		
		
		BehaviorPatternDTO behaviorPatternDTO1 = new BehaviorPatternDTO();
		behaviorPatternDTO1.setBehaviorPatternId(1087);
		behaviorPatternDTO1.setErId(1051);
		behaviorPatternDTO1.setThisBpRequiresDr(true);
		behaviorPatternDTO1.setBaId("1");
		behaviorPatternDTO1.setBehaviorPatternName("O:Labs, POS 81, $pd");
		behaviorPatternDTO1.setDataElementCode(295);	// ??
		availableBehaviorPatternList.add(behaviorPatternDTO1);
    	
		BehaviorPatternDTO behaviorPatternDTO2 = new BehaviorPatternDTO();
		behaviorPatternDTO2.setBehaviorPatternId(1085);
		behaviorPatternDTO2.setErId(1049);
		behaviorPatternDTO2.setThisBpRequiresDr(true);
		behaviorPatternDTO2.setBaId("2");
		behaviorPatternDTO2.setBehaviorPatternName("O:Labs, POS 81, #clms");
		behaviorPatternDTO2.setDataElementCode(291);	
		availableBehaviorPatternList.add(behaviorPatternDTO2);
    		
    	doReturn(availableBehaviorPatternList).when(reportItemDataService).getAvailableBehaviorPatterns(reportItemId);
		@SuppressWarnings("unchecked")
		ResponseEntity<List<BehaviorPatternDTO>> responseEntity = reportItemController.getAvailableBehaviors(reportItemId);
        assertNotNull(responseEntity);
		assertEquals(behaviorPatternDTO1.getBehaviorPatternName(), responseEntity.getBody().get(0).getBehaviorPatternName());
		assertEquals(behaviorPatternDTO2.getBehaviorPatternName(), responseEntity.getBody().get(1).getBehaviorPatternName());
   }
    
    @Test
    public void testGetSelectedBehaviorPatterns(){
    	List<BehaviorPatternDTO> selectedBehaviorPatternList = new ArrayList<>();
    	Integer reportItemId = 2018;		
		
		BehaviorPatternDTO behaviorPatternDTO1 = new BehaviorPatternDTO();
		behaviorPatternDTO1.setBehaviorPatternId(585);
		behaviorPatternDTO1.setErId(551);
		behaviorPatternDTO1.setThisBpRequiresDr(true);
		behaviorPatternDTO1.setBaId("3");
		behaviorPatternDTO1.setBehaviorPatternName("Dental, Rend, SSCrowns Age 0-6, #clms");
		behaviorPatternDTO1.setDataElementCode(295);	
		selectedBehaviorPatternList.add(behaviorPatternDTO1);
    	
		BehaviorPatternDTO behaviorPatternDTO2 = new BehaviorPatternDTO();
		behaviorPatternDTO2.setBehaviorPatternId(586);
		behaviorPatternDTO2.setErId(552);
		behaviorPatternDTO2.setThisBpRequiresDr(true);
		behaviorPatternDTO2.setBaId("2");
		behaviorPatternDTO2.setBehaviorPatternName("Dental, Rend, SSCrowns, Ages 0-6, d#recips");
		behaviorPatternDTO2.setDataElementCode(251);	
		selectedBehaviorPatternList.add(behaviorPatternDTO2);
    		
    	doReturn(selectedBehaviorPatternList).when(reportItemDataService).getSelectedBehaviorPatterns(reportItemId);
		@SuppressWarnings("unchecked")
		ResponseEntity<List<BehaviorPatternDTO>> responseEntity = reportItemController.getSelectedBehaviors(reportItemId);
        assertNotNull(responseEntity);
        assertEquals(behaviorPatternDTO1.getBehaviorPatternName(), responseEntity.getBody().get(0).getBehaviorPatternName());
		assertEquals(behaviorPatternDTO2.getBehaviorPatternName(), responseEntity.getBody().get(1).getBehaviorPatternName());
		
   }
    */


}




above is the test class which is shpwinhg 0% and below is the acyual class help me to give 100 %

/*
//***********************************************
// Copyright UNITEDHEALTH GROUP CORPORATION 2018.
// This software and documentation contain confidential and
// proprietary information owned by UnitedHealth Group Corporation.
// Unauthorized use and distribution are prohibited.
//***********************************************
*/

package com.optum.fads.pgp.reportsection.api.controller;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.stereotype.Component;
import org.springframework.web.bind.WebDataBinder;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.InitBinder;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import com.optum.fads.pgp.reportsection.api.common.ListTableParams;
import com.optum.fads.pgp.reportsection.api.common.ListTableParamsReq;
import com.optum.fads.pgp.reportsection.api.common.constants.ReportSectionConstants;
import com.optum.fads.pgp.reportsection.api.dto.AccessLevel;
import com.optum.fads.pgp.reportsection.api.dto.AppUser;
import com.optum.fads.pgp.reportsection.api.dto.BehaviorPatternDTO;
import com.optum.fads.pgp.reportsection.api.dto.PaginationResultRI;

import com.optum.fads.pgp.reportsection.api.dto.ReportItemDTO;
import com.optum.fads.pgp.reportsection.api.dto.Role;
import com.optum.fads.pgp.reportsection.api.exception.ReportSectionApiException;
import com.optum.fads.pgp.reportsection.api.service.IReportItemDataService;

/**
 * Use this class to add the methods so that a single web service can be used to
 * get and update the FADS Report Section data 
 *
 ** @author Anil Wagh
 */
@Component
@RestController
//@RequestMapping("/")
@CrossOrigin
public class ReportItemController {
	
	private static final Logger logit = LoggerFactory
			.getLogger(ReportItemController.class);
	@Autowired
	private IReportItemDataService iReportItemDataService;
	
	  final String[] DISALLOWED_FIELDS = new String[]{"listTableParams.selectedItemIds"};
	     
	    @InitBinder(value = "listTableParams")
	    void initListTableParamsValidator(WebDataBinder binder) {
	        binder.setDisallowedFields(DISALLOWED_FIELDS);
	    }
	    
	
	/**
	* this method will give the Report Item data records per page by filter/sort criteria
	 * 
	 * @param - ListTableParams (contains sort, filter conditions; page number, page size)
	 */
	@GetMapping(value = "/getreportitems/",headers="Accept=application/json")
	public ResponseEntity getReportItems(ListTableParamsReq listTableParamsReq,String searchInput) {
		PaginationResultRI paginationResult;
		try {
			ListTableParams listTableParams=new ListTableParams();
			listTableParams.setPageNumber(listTableParamsReq.getPageNumber());
			listTableParams.setRecordsPerPage(listTableParamsReq.getRecordsPerPage());
			listTableParams.setSearchBy(listTableParamsReq.getSearchBy());
			listTableParams.setSearchInput(Collections.singletonList(searchInput));
			listTableParams.setSelectedItemIds(listTableParamsReq.getSelectedItemIds());
			listTableParams.setSortBy(listTableParamsReq.getSortBy());
			listTableParams.setSortOrder(listTableParamsReq.getSortOrder());
			paginationResult = iReportItemDataService.getReportItemsList(listTableParams);	
		} catch (ReportSectionApiException ex) {
			logit.error(ReportSectionConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(ReportSectionConstants.EXCEPTION_MESSAGE);
		}		
		return ResponseEntity
		        .status(HttpStatus.OK)                 
		        .body(paginationResult);
   }
	 /**
	  * this method will get the report item record corresponding to input Report Item ID  
	 * @param - Report Item ID 
	 */
	@GetMapping(value = "/getreportitemdetails/{reportItemId}")
	 public ResponseEntity getReportItemById(@PathVariable(name = "reportItemId") Integer reportItemId)
		 
	{   
		ReportItemDTO reportItemDTO = null;
		 try {	
			 reportItemDTO = iReportItemDataService.getReportItemById(reportItemId);
		 } catch (ReportSectionApiException ex) {
			 logit.error(ReportSectionConstants.EXCEPTION_MESSAGE, ex.getMessage());
				return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(ReportSectionConstants.EXCEPTION_MESSAGE);
	     }		
		return ResponseEntity
		            .status(HttpStatus.OK)                 
		            .body(reportItemDTO);
	 }
	 /**
	 * this method will delete the Report Item record corresponding to input Report Item ID  
	 * @param - Report Item ID 
	 */
	@DeleteMapping(value = "/deletereportitem/{reportitemid}")
	public ResponseEntity deleteReportItemById(@PathVariable(name = "reportitemid") Integer reportItemId)
 
	{   
		List<String> deleteReportItemMessages;
		 try {
			 deleteReportItemMessages = iReportItemDataService.deleteReportItem(reportItemId);
		 } catch (ReportSectionApiException ex) {
			 logit.error(ReportSectionConstants.EXCEPTION_MESSAGE, ex.getMessage());
				return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(ReportSectionConstants.EXCEPTION_MESSAGE);
	     }		
		return ResponseEntity
		       .status(HttpStatus.OK)                 
		       .body(deleteReportItemMessages);
	 }
	/**
	* this method will add a Report Item 
	 * 
	 * @param - reportItemDTO
	 */
	@PostMapping(value = {"/newreportitem"})
	public ResponseEntity newReportItem(@RequestBody ReportItemDTO reportItemDTO) {
		ReportItemDTO retReportItemDTO = null;
		String userAccess = "";
		boolean userHasAccess = false;
		try {
			DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(ReportSectionConstants.DATE_FORMAT_MMDDYYYY_HHMMSS_A,
				Locale.ENGLISH);
			Authentication auth =  SecurityContextHolder.getContext().getAuthentication();
			if (auth != null) {
				AppUser user = (AppUser) auth.getPrincipal();
				reportItemDTO.setCreatedBySystemId(user.getUserSystemId());
				reportItemDTO.setModifiedBySystemId(user.getUserSystemId());
				List<AccessLevel> userAccessLevels = user.getRole().getAllowedAccesses();
				for (AccessLevel userAccessLevel : userAccessLevels) {
					if (userAccessLevel.getModuleCode().equals("STUDY")) {
						userAccess = userAccessLevel.getAccess();
						break;
					}
				}
				if (userAccess.equals("A") || userAccess.equals("B")) {
					userHasAccess = true;
				}
			}
			if (userHasAccess) {
				LocalDateTime currentLocalDate = LocalDateTime.now(iReportItemDataService.getZoneId());
				// Save the create and update date as per local time zone in the DTO
				reportItemDTO.setCreatedDate(dateTimeFormatter.format(currentLocalDate));
				reportItemDTO.setModifiedDate(dateTimeFormatter.format(currentLocalDate));
				retReportItemDTO = iReportItemDataService.addReportItem(reportItemDTO);
				return ResponseEntity
				        .status(HttpStatus.CREATED)                 
				        .body(retReportItemDTO);
			} else {
				return new ResponseEntity<String>(ReportSectionConstants.NOT_AUTHORIZED, HttpStatus.FORBIDDEN);
			}
		} catch (ReportSectionApiException ex) {
			logit.error(ReportSectionConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(ReportSectionConstants.EXCEPTION_MESSAGE);
		}		
		
   }
	/**
	* this method will update a report section 
	 * 
	 * @param - reportItemDTO
	 */
	@PutMapping(value = {"/updatereportitem/{reportItemId}"})
	public ResponseEntity<String> updateReportItem(@PathVariable Integer reportItemId, @RequestBody ReportItemDTO reportItemDTO) {
		String updReportItemMessage;
		String userAccess = "";
		boolean userHasAccess = false;
		try {
			DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(ReportSectionConstants.DATE_FORMAT_MMDDYYYY_HHMMSS_A,
				Locale.ENGLISH);
			Authentication auth =  SecurityContextHolder.getContext().getAuthentication();
			if (auth != null) {
				AppUser user = (AppUser) auth.getPrincipal();
				reportItemDTO.setModifiedBySystemId(user.getUserSystemId());
				List<AccessLevel> userAccessLevels = user.getRole().getAllowedAccesses();
				for (AccessLevel userAccessLevel : userAccessLevels) {
					if (userAccessLevel.getModuleCode().equals("STUDY")) {
						userAccess = userAccessLevel.getAccess();
						break;
					}
				}
				if (userAccess.equals("A") || 
						(userAccess.equals("B") && reportItemDTO.getCreatedBySystemId().equals(user.getUserSystemId()))) {
					userHasAccess = true;
				}
			}
			
			if (userHasAccess) {
					LocalDateTime currentLocalDate = LocalDateTime.now(iReportItemDataService.getZoneId());
					// Save the update date as per local time zone in the DTO
					reportItemDTO.setModifiedDate(dateTimeFormatter.format(currentLocalDate));
					updReportItemMessage = iReportItemDataService.updateReportItem(reportItemId, reportItemDTO);
					return ResponseEntity
					        .status(HttpStatus.OK)                 
					        .body(updReportItemMessage);
			} else {
				return new ResponseEntity<String>(ReportSectionConstants.NOT_AUTHORIZED, HttpStatus.FORBIDDEN);
			}
		} catch (com.optum.fads.pgp.reportsection.api.exception.ReportSectionApiException ex) {
			logit.error(ReportSectionConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(ReportSectionConstants.EXCEPTION_MESSAGE);
		}		
		
   }
	/**
	* this method will get the available behavior pattern records  
	 * 
	 * @param - Report Item ID
	 */
	@GetMapping(value = {"/getavailablebehaviorpatterns/{reportItemId}"})
	public ResponseEntity getAvailableBehaviors(@PathVariable Integer reportItemId) {
		List<BehaviorPatternDTO> availableBehaviorPatternsList;
		try {
			availableBehaviorPatternsList = iReportItemDataService.getAvailableBehaviorPatterns(reportItemId);
		} catch (ReportSectionApiException ex) {
			logit.error(ReportSectionConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(ReportSectionConstants.EXCEPTION_MESSAGE);
		}		
		return ResponseEntity
		        .status(HttpStatus.OK)                 
		        .body(availableBehaviorPatternsList);
   }
	/**
	* this method will get the selected behavior pattern records
	 * 
	 * @param - Report Item ID
	 */
	@GetMapping(value = {"/getselectedbehaviorpatterns/{reportItemId}"})
	public ResponseEntity getSelectedBehaviors(@PathVariable Integer reportItemId) {
		List<BehaviorPatternDTO> selectedBehaviorPatternsList;
		 try {
			 selectedBehaviorPatternsList = iReportItemDataService.getSelectedBehaviorPatterns(reportItemId);
		 } catch (ReportSectionApiException ex) {
			 logit.error(ReportSectionConstants.EXCEPTION_MESSAGE, ex.getMessage());
				return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(ReportSectionConstants.EXCEPTION_MESSAGE);
	     }		
		return ResponseEntity
		            .status(HttpStatus.OK)                 
		            .body(selectedBehaviorPatternsList);
   }
	/**
	 * this method will give all the Report Item data or records per page for My Items request
	 * 
	 * @param - ListTableParams (contains sort, filter conditions; page number, page
	 *          size)
	 */
	@GetMapping(value = { "/getmyreportitems/" }, headers = "Accept=application/json")
	public ResponseEntity getMyReportItems(ListTableParams listTableParams) {
		PaginationResultRI paginationResult;
		try {
			Authentication auth =  SecurityContextHolder.getContext().getAuthentication();
			if (auth != null) {
				AppUser user = (AppUser) auth.getPrincipal();
				if (listTableParams.getSearchBy() == null) {
					listTableParams.setSearchBy(new ArrayList <String>());
					listTableParams.setSearchInput(new ArrayList <String>());
				}
				listTableParams.getSearchBy().add(ReportSectionConstants.USER_SYSTEM_ID);
				listTableParams.getSearchInput().add(user.getUserSystemId());
			}
			paginationResult = iReportItemDataService.getReportItemsList(listTableParams);
		} catch (ReportSectionApiException ex) {
			logit.error(ReportSectionConstants.EXCEPTION_MESSAGE, ex.getMessage());
			return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(ReportSectionConstants.EXCEPTION_MESSAGE);
		}
		return ResponseEntity.status(HttpStatus.OK).body(paginationResult);
	}
}
