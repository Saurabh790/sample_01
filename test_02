package com.optum.fads.pgp.reportsection.api.config;

import static org.junit.jupiter.api.Assertions.*;

import javax.sql.DataSource;

import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.runner.ApplicationContextRunner;

class ServiceConfigTest {

    private final ApplicationContextRunner runner = new ApplicationContextRunner()
            .withUserConfiguration(ServiceConfig.class)
            .withPropertyValues(
                    // Force simple DataSource implementation (no Hikari startup validation)
                    "spring.datasource.type=org.springframework.jdbc.datasource.DriverManagerDataSource",
                    "spring.datasource.url=jdbc:dummy:test",
                    "spring.datasource.username=sa",
                    "spring.datasource.password="
            );

    @Test
    void customDataSource_createdFromSpringDatasourceProperties() {
        runner.run(ctx -> {
            assertTrue(ctx.containsBean("fadsDataSource"));
            DataSource ds = (DataSource) ctx.getBean("fadsDataSource");
            assertNotNull(ds);
        });
    }
}
