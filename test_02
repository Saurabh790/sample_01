private void getFindAllQueryFilters(StringBuilder sb,
                                    Map<String,String> filterConditions,
                                    Map<String,String> safeParams) {
    if(filterConditions != null && !filterConditions.isEmpty()) {
        for (Map.Entry<String, String> entry : filterConditions.entrySet()) {
            for (CaseListAssociationsColumnsEnum col : CaseListAssociationsColumnsEnum.values()) {
                if (col.getColumnId().equals(entry.getKey())) {

                    String paramName = safeParams.get(entry.getKey()); // p0,p1,...

                    if (col.isColumnDropDownForSearch()){
                        sb.append(" and ").append(col.getColumnStringSearchOrderBy())
                          .append(" = :").append(paramName);

                    } else if ("intelligentKey".equals(entry.getKey())) {
                        sb.append(" and lower(c.caIntelligentKeyTByCaseId.caLuPrmNodeT.nodeCd || '-' || ");
                        if (CaseGlobalConstants.SCND_NODE_VISIBLE.equalsIgnoreCase("Y")) {
                            sb.append(" c.caIntelligentKeyTByCaseId.caLuScndNodeT.nodeCd || '-' || ");
                        }
                        sb.append(" c.caIntelligentKeyTByCaseId.caYearId || '-' || ");
                        sb.append(" to_char(c.caIntelligentKeyTByCaseId.caSequenceId,'FM00000')) like :")
                          .append(paramName);

                    } else if ("associatedIntelligentKey".equals(entry.getKey())) {
                        sb.append(" and lower(c.caIntelligentKeyTByAssociateCaseId.caLuPrmNodeT.nodeCd ")
                          .append("||'-'|| ");
                        if (CaseGlobalConstants.SCND_NODE_VISIBLE.equalsIgnoreCase("Y")) {
                            sb.append(" c.caIntelligentKeyTByAssociateCaseId.caLuScndNodeT.nodeCd ||'-'|| ");
                        }
                        sb.append(" c.caIntelligentKeyTByAssociateCaseId.caYearId ||'-'|| ");
                        sb.append(" to_char(c.caIntelligentKeyTByAssociateCaseId.caSequenceId,'FM00000')) like :")
                          .append(paramName);

                    } else {
                        sb.append(" and lower(").append(col.getColumnStringSearchOrderBy())
                          .append(") like :").append(paramName);

                        if (StringUtils.containsAny(entry.getValue(), '%', '_')) {
                            sb.append(" ESCAPE '\\' ");
                        }
                    }
                }
            }
        }
    }
}
private void setFindAllQueryFilters(Query query,
                                    Map<String,String> filterConditions,
                                    Map<String,String> safeParams) {
    if(filterConditions != null && !filterConditions.isEmpty()) {
        for (Map.Entry<String, String> entry : filterConditions.entrySet()) {
            for (CaseListAssociationsColumnsEnum col : CaseListAssociationsColumnsEnum.values()) {
                if (col.getColumnId().equals(entry.getKey())) {

                    String paramName = safeParams.get(entry.getKey());

                    if (col.isColumnDropDownForSearch()){
                        query.setString(paramName, entry.getValue());

                    } else {
                        // Preserve your ESCAPE logic for % and _
                        String escString = entry.getValue();
                        if (StringUtils.containsAny(escString, '%', '_')) {
                            escString = StringUtils.replace(
                                    StringUtils.replace(escString, "%", "\\%"), "_", "\\_");
                        }
                        query.setString(paramName, getLowerSearchString(escString));
                    }
                }
            }
        }
    }
}
private void getCasesForAssocQueryFilters(StringBuilder sb,
                                          Map<String,String> filterConditions,
                                          Map<String,String> safeParams) {
    if(filterConditions != null && !filterConditions.isEmpty()) {
        for (Map.Entry<String, String> entry : filterConditions.entrySet()) {
            for (CasesForAssociationsColumnsEnum col : CasesForAssociationsColumnsEnum.values()) {
                if (col.getColumnId().equals(entry.getKey())) {

                    String paramName = safeParams.get(entry.getKey());

                    if ("intelligentKey".equals(entry.getKey())) {
                        sb.append(" and lower(c.caLuPrmNodeT.nodeCd ").append("||'-'|| ");
                        if (CaseGlobalConstants.SCND_NODE_VISIBLE.equalsIgnoreCase("Y")) {
                            sb.append(" c.caLuScndNodeT.nodeCd ||'-'|| ");
                        }
                        sb.append(" c.caYearId ||'-'|| ");
                        sb.append(" to_char(c.caSequenceId,'FM00000')) like :").append(paramName);

                    } else if ("associatedIntelligentKey".equals(entry.getKey())) {
                        sb.append(" and lower(assoc.caIntelligentKeyTByAssociateCaseId.caLuPrmNodeT.nodeCd ")
                          .append("||'-'|| ");
                        if (CaseGlobalConstants.SCND_NODE_VISIBLE.equalsIgnoreCase("Y")) {
                            sb.append(" assoc.caIntelligentKeyTByAssociateCaseId.caLuScndNodeT.nodeCd ||'-'|| ");
                        }
                        sb.append(" assoc.caIntelligentKeyTByAssociateCaseId.caYearId ||'-'|| ");
                        sb.append(" to_char(assoc.caIntelligentKeyTByAssociateCaseId.caSequenceId,'FM00000')) like :")
                          .append(paramName);

                    } else {
                        sb.append(" and lower(").append(col.getColumnStringSearchOrderBy())
                          .append(") like :").append(paramName);
                    }
                }
            }
        }
    }
}
private void setCasesForAssocQueryFilters(Query query,
                                          Map<String,String> filterConditions,
                                          Map<String,String> safeParams) {
    if(filterConditions != null && !filterConditions.isEmpty()) {
        for (Map.Entry<String, String> entry : filterConditions.entrySet()) {
            for (CasesForAssociationsColumnsEnum col : CasesForAssociationsColumnsEnum.values()) {
                if (col.getColumnId().equals(entry.getKey())) {
                    String paramName = safeParams.get(entry.getKey());
                    query.setString(paramName, getLowerSearchString(entry.getValue()));
                }
            }
        }
    }
}
